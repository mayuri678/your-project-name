<div class="builder-container">
  <div class="builder-sidebar">
    <h2>Edit Resume</h2>
    
    <div class="photo-section">
      <div class="photo-upload" *ngIf="!profilePhoto">
        <input type="file" id="photo" accept="image/*" (change)="onPhotoSelected($event)" hidden>
        <label for="photo" class="upload-btn">
          <i class="photo-icon">ðŸ“·</i>
          <span>Add Photo</span>
        </label>
      </div>
      <div class="photo-preview" *ngIf="profilePhoto">
        <img [src]="profilePhoto" alt="Profile">
        <button class="remove-btn" (click)="removePhoto()">Ã—</button>
      </div>
    </div>

    <div class="form-section">
      <h3>Personal Info</h3>
      <input type="text" [(ngModel)]="resumeData.name" (ngModelChange)="updatePreview()" placeholder="Full Name">
      <input type="text" [(ngModel)]="resumeData.title" (ngModelChange)="updatePreview()" placeholder="Job Title">
      <input type="email" [(ngModel)]="resumeData.email" (ngModelChange)="updatePreview()" placeholder="Email">
      <input type="tel" [(ngModel)]="resumeData.phone" (ngModelChange)="updatePreview()" placeholder="Phone">
      <input type="text" [(ngModel)]="resumeData.location" (ngModelChange)="updatePreview()" placeholder="Location">
      <input type="text" [(ngModel)]="resumeData.linkedin" (ngModelChange)="updatePreview()" placeholder="LinkedIn">
      <textarea [(ngModel)]="resumeData.summary" (ngModelChange)="updatePreview()" placeholder="Professional Summary" rows="3"></textarea>
    </div>

    <div class="form-section">
      <h3>Skills</h3>
      <div class="input-group">
        <input type="text" [(ngModel)]="skillInput" placeholder="Add skill" (keyup.enter)="addSkill()">
        <button (click)="addSkill()">+</button>
      </div>
      <div class="tags">
        <span *ngFor="let skill of resumeData.skills; let i = index" class="tag">
          {{skill}} <button (click)="removeSkill(i)">Ã—</button>
        </span>
      </div>
    </div>

    <div class="form-section">
      <h3>Experience</h3>
      <button class="add-btn" (click)="addExperience()">+ Add Experience</button>
      <div *ngFor="let exp of resumeData.experience; let i = index" class="item-card">
        <button class="remove-item" (click)="removeExperience(i)">Ã—</button>
        <input type="text" [(ngModel)]="exp.role" (ngModelChange)="updatePreview()" placeholder="Job Title">
        <input type="text" [(ngModel)]="exp.company" (ngModelChange)="updatePreview()" placeholder="Company">
        <input type="text" [(ngModel)]="exp.duration" (ngModelChange)="updatePreview()" placeholder="Duration">
        <textarea [(ngModel)]="exp.description" (ngModelChange)="updatePreview()" placeholder="Description" rows="2"></textarea>
      </div>
    </div>

    <div class="form-section">
      <h3>Education</h3>
      <button class="add-btn" (click)="addEducation()">+ Add Education</button>
      <div *ngFor="let edu of resumeData.education; let i = index" class="item-card">
        <button class="remove-item" (click)="removeEducation(i)">Ã—</button>
        <input type="text" [(ngModel)]="edu.degree" (ngModelChange)="updatePreview()" placeholder="Degree">
        <input type="text" [(ngModel)]="edu.institution" (ngModelChange)="updatePreview()" placeholder="Institution">
        <input type="text" [(ngModel)]="edu.year" (ngModelChange)="updatePreview()" placeholder="Year">
      </div>
    </div>

    <div class="form-section">
      <h3>Certifications</h3>
      <div class="input-group">
        <input type="text" [(ngModel)]="certInput" placeholder="Add certification" (keyup.enter)="addCertification()">
        <button (click)="addCertification()">+</button>
      </div>
      <div class="tags">
        <span *ngFor="let cert of resumeData.certifications; let i = index" class="tag">
          {{cert}} <button (click)="removeCertification(i)">Ã—</button>
        </span>
      </div>
    </div>

    <div class="action-buttons">
      <button class="save-btn" (click)="saveResume()">ðŸ’¾ Save</button>
      <button class="download-btn" (click)="downloadPDF()">ðŸ“¥ Download PDF</button>
    </div>
  </div>

  <div class="builder-preview">
    <h3>Live Preview - Template {{selectedTemplateId}}</h3>
    <div class="template-preview-container" #templateContainer></div>
  </div>
</div>