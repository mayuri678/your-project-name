<header class="home-header">
  <div class="header-content">

    <!-- Left: Logo and Company Name -->
    <div class="header-left">
      <div class="logo">RB</div>
      <h1 class="company-name">Resume Builder</h1>
    </div>

    <!-- Navigation Links -->
    <nav class="header-nav">
      <a class="nav-link" routerLink="/home" routerLinkActive="active">Home</a>
      <a class="nav-link" routerLink="/about" routerLinkActive="active">About</a>
      <a class="nav-link" routerLink="/my-templates" routerLinkActive="active">My Templates</a>
      <div class="templates-dropdown">
        <a class="nav-link" (click)="toggleTemplates()">Templates â–¼</a>
        <div class="templates-menu" *ngIf="isTemplatesOpen" (mouseleave)="closeTemplates()">
          <div class="templates-header">
            <h3>Choose Template</h3>
            <button class="close-templates-btn" (click)="closeTemplates()">Ã—</button>
          </div>
          <div class="templates-grid">
            <button class="template-item" *ngFor="let template of templateList" (click)="selectTemplate(template); closeTemplates()">
              <div class="template-preview">
                <div class="template-icon">ğŸ“„</div>
                <div class="template-info">
                  <div class="template-name">{{ template.name }}</div>
                  <div class="template-category">{{ template.category }}</div>
                  <div class="template-description">{{ template.description }}</div>
                </div>
              </div>
            </button>
          </div>
          <div class="templates-footer">
            <button class="view-all-btn" (click)="onTemplatesClick(); closeTemplates()">
              View All Templates â†’
            </button>
          </div>
        </div>
      </div>
    </nav>

    <!-- Right: Contact and Account -->
    <div class="contact-info">
      <!-- Help Button -->
      <button class="help-btn" (click)="goToHelp()" title="Help & Documentation">ğŸ“‹ HELP</button>
      
      <!-- Contact Button -->
      <button class="contact-btn" (click)="openContactForm()" aria-label="Contact us">ğŸ’¬ CONTACT</button>

      <!-- âœ… Login Button: Only visible if not logged in -->
      <button *ngIf="!loggedIn" class="login-btn" (click)="goToLogin()">Login</button>

      <!-- User Profile Avatar: Visible if logged in -->
      <div class="user-profile" *ngIf="loggedIn">
        <button class="user-avatar" (click)="toggleAccount()" [attr.aria-haspopup]="true" [attr.aria-expanded]="isAccountOpen">
          <img *ngIf="getUserPhoto()" [src]="getUserPhoto()" alt="Profile" class="avatar-photo">
          <span *ngIf="!getUserPhoto()">{{ getUserInitial() }}</span>
        </button>
        <div class="user-menu" *ngIf="isAccountOpen" (mouseleave)="closeAccount()">
          <!-- Menu Header with Close Button -->
          <div class="menu-header">
            <h3 class="menu-title">Account</h3>
            <button class="close-menu-btn" (click)="closeAccount()" aria-label="Close menu">
              <span class="close-icon">âœ•</span>
            </button>
          </div>
          
          <!-- Current User Info Section -->
          <div class="user-info current-user">
            <div class="user-avatar-large">
              <img *ngIf="getUserPhoto()" [src]="getUserPhoto()" alt="Profile" class="avatar-photo-large">
              <span *ngIf="!getUserPhoto()">{{ getUserInitial() }}</span>
            </div>
            <div class="user-details">
              <div class="user-name">{{ getCurrentUserName() }}</div>
              <div class="user-email">{{ getCurrentUserEmail() }}</div>
              <div class="user-status">Current User</div>
            </div>
          </div>

          <!-- Menu Actions -->
          <div class="menu-actions">
            <button class="menu-item" (click)="goToProfile(); closeAccount()">
              <span class="menu-icon">ğŸ‘¤</span>
              Profile
            </button>
            <button class="menu-item" (click)="goToSettings(); closeAccount()">
              <span class="menu-icon">âš™ï¸</span>
              Settings
            </button>
            <button *ngIf="isAdmin" class="menu-item admin" (click)="goToAdmin(); closeAccount()">
              <span class="menu-icon">ğŸ”§</span>
              Admin Panel
            </button>
            <div class="menu-divider"></div>
            <button class="menu-item logout" (click)="logoutCurrentUser(); closeAccount()">
              <span class="menu-icon">ğŸšª</span>
              Logout
            </button>
          </div>
        </div>
      </div>
    </div>

  </div>
</header>

<!-- Contact Popup -->
<div class="contact-popup-overlay" *ngIf="showContactPopup" (click)="closeContactPopup()">
  <div class="contact-popup" (click)="$event.stopPropagation()">
    <button class="close-popup" (click)="closeContactPopup()">&times;</button>
    <h2>Contact Us</h2>
    <div>
      <div class="form-group">
        <label>Name</label>
        <input type="text" [(ngModel)]="contactForm.name" name="name">
      </div>
      <div class="form-group">
        <label>Email</label>
        <input type="email" [(ngModel)]="contactForm.email" name="email">
      </div>
      <div class="form-group">
        <label>Message</label>
        <textarea [(ngModel)]="contactForm.message" name="message" rows="5"></textarea>
      </div>
      <div class="popup-actions">
        <button type="button" class="btn-send" (click)="sendContactMessage()">Send</button>
        <button type="button" class="btn-cancel" (click)="closeContactPopup()">Cancel</button>
      </div>
    </div>
  </div>
</div>
