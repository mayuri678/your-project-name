<div class="change-password-container">
  <div class="change-password-card">
    <h2>{{ isPasswordReset ? 'ğŸ” Reset Password' : 'ğŸ” Change Password' }}</h2>
    <p class="subtitle">{{ isPasswordReset ? 'Enter your new password' : 'Update your account password' }}</p>
    
    <form (ngSubmit)="onSubmit()" #changePasswordForm="ngForm">
      <!-- Current Password -->
      <div class="form-group">
        <label for="currentPassword">Current Password</label>
        <div class="password-input-container">
          <input 
            [type]="showCurrentPassword ? 'text' : 'password'"
            id="currentPassword" 
            name="currentPassword"
            [(ngModel)]="currentPassword" 
            required 
            placeholder="Enter your current password"
            class="form-control"
            [disabled]="isLoading">
          <button 
            type="button" 
            class="password-toggle"
            (click)="togglePasswordVisibility('current')"
            [disabled]="isLoading">
            {{ showCurrentPassword ? 'ğŸ‘ï¸' : 'ğŸ‘ï¸ğŸ—¨ï¸' }}
          </button>
        </div>
      </div>

      <!-- New Password -->
      <div class="form-group">
        <label for="newPassword">New Password</label>
        <div class="password-input-container">
          <input 
            [type]="showNewPassword ? 'text' : 'password'"
            id="newPassword" 
            name="newPassword"
            [(ngModel)]="newPassword" 
            required 
            minlength="6"
            placeholder="Enter new password (min 6 characters)"
            class="form-control"
            [disabled]="isLoading">
          <button 
            type="button" 
            class="password-toggle"
            (click)="togglePasswordVisibility('new')"
            [disabled]="isLoading">
            {{ showNewPassword ? 'ğŸ‘ï¸' : 'ğŸ‘ï¸ğŸ—¨ï¸' }}
          </button>
        </div>
      </div>

      <!-- Confirm New Password -->
      <div class="form-group">
        <label for="confirmPassword">Confirm New Password</label>
        <div class="password-input-container">
          <input 
            [type]="showConfirmPassword ? 'text' : 'password'"
            id="confirmPassword" 
            name="confirmPassword"
            [(ngModel)]="confirmPassword" 
            required 
            minlength="6"
            placeholder="Confirm your new password"
            class="form-control"
            [disabled]="isLoading">
          <button 
            type="button" 
            class="password-toggle"
            (click)="togglePasswordVisibility('confirm')"
            [disabled]="isLoading">
            {{ showConfirmPassword ? 'ğŸ‘ï¸' : 'ğŸ‘ï¸ğŸ—¨ï¸' }}
          </button>
        </div>
      </div>

      <!-- Password Match Indicator -->
      <div class="password-match-indicator" *ngIf="newPassword && confirmPassword">
        <div class="match-status" [class.match]="newPassword === confirmPassword" [class.no-match]="newPassword !== confirmPassword">
          <span *ngIf="newPassword === confirmPassword" class="match-text">âœ… Passwords match</span>
          <span *ngIf="newPassword !== confirmPassword" class="no-match-text">âŒ Passwords do not match</span>
        </div>
      </div>

      <!-- Messages -->
      <div class="message-container">
        <div *ngIf="message" class="success-message">
          {{ message }}
        </div>
        <div *ngIf="errorMessage" class="error-message">
          {{ errorMessage }}
        </div>
      </div>

      <!-- Buttons -->
      <div class="button-group">
        <button 
          type="submit" 
          class="btn-primary"
          [disabled]="!changePasswordForm.form.valid || isLoading || newPassword !== confirmPassword">
          <span *ngIf="isLoading" class="loading-spinner"></span>
          {{ isLoading ? 'Changing...' : 'Change Password' }}
        </button>
        
        <button 
          type="button" 
          class="btn-secondary"
          (click)="goBack()"
          [disabled]="isLoading">
          Cancel
        </button>
      </div>
    </form>
  </div>
</div>